# 9주차 - 1022 가상메모리와 프레임할당 퀴이즈



### 1. 가상 메모리 기법을 사용하는 장점이 아닌 것은 ?

1. 한 번에 사용하는 소스의 양이 적기때문에 Disk와 Memory 간 I/O 작업속도가 빨라짐
2. ~~디스크의 스왑 영역을 사용하기 때문에 물리적 메모리의 공간이 기존보다 커짐~~
3. 프로그램이 전체 다 올라가지 않기 때문에 더 많은 프로그램을 동시에 사용할 수 있음
4. 프로그램이 물리적 메모리 여유 공간이 얼마나 되는지 시작 전에 확인할 필요가 없어짐



### 2. 아래와 같은 Reference String이 들어왔을때 각 페이지교체 알고리즘당 발생하는 페이지부재 횟수와 마지막 프레임 상태를 작성하라. (페이지 프레임은 4개이다.) - 각 단계별 프레임 상태를 기록해두고 공유했음 좋겠습니다.



- Reference String : 5 6 2 4 2 0 0 7 5 7 2 3 1 3 6



| 알고리즘 종류     | 페이지부재 횟수 및 마지막 프레임 상태 |
| ----------------- | ------------------------------------- |
| LRU 알고리즘      | 페이지 부재 10, 마지막 프레임 3621    |
| 선입선출 알고리즘 | 페이지 부재 11, 마지막 프레임 3162    |
| LFU 알고리즘      | 페이지 부재 12, 마지막 프레임 0726    |



### 3. 프레임 할당의 기본적 방법 3가지의 이름과, 그 방식에 대해 작성하시오.

```reStructuredText
균등 할당: 프로세스의 목적과 성격에 상관없이 모든 프로세스에게 고정된 양의 프레임을 할당해준다.
비례 할당: 프로세스의 크기에 비례하여 페이지 프레임을 할당해준다.
우선순위 할당: 우선순위가 높은 프로세스에게 더 많은 양의 Frame을 할당해준다.
```



### 4. 스레싱의 발생 원인에 대해 간단히 작성해보시오.

```reStructuredText
multiprocessing으로 인해 ready queue에 많이 올라와있지 않는다. 때문에 OS에서는 CPU이용률이 적다고 판단하고 더 많은 프로그램을 동시에 작동시키기 위해 ready queue에 밀어넣는다. CPU는 또 다시 multiprocessing을 진행하게 되는 악순환이 시작된다. 때문에 thrashing 현상이 발생한다.
```



### 5. 스레싱을 방지하는 방법 두가지는 무엇인가 ?

```reStructuredText
1. 워킹셋(workingset) 알고리즘: 프로세스가 일정 시간동안 원활히 수행되기 위해 메모리에 한꺼번에 올라가 있어야하는 페이지들의 집합을 **워킹셋(Working Set)**이라고 정의하고, 이 워킹셋을 구성하는 페이지들이 한꺼번에 메모리에 올라갈 수 있는 경우에만 그 프로세스에게 메모리를 할당한다. 그럴 수 없는 경우에는 프로세스에게 할당된 페이지 프레임들을 모두 반납시킨 후 그 프로세스의 주소 공간 전체를 디스크로 스왑아웃 시킨다. 즉, 이미 메모리에 올라가있는 다른 프로세스에게 Page Frame을 양보함으로써 스레싱을 방지하는 것이다.

2. 페이지 부재 빈도(PFF: Page Fault Frequency): 페이지 부재 빈도 알고리즘에서는 페이지 부재율을 주기적으로 조사하고, 이 값에 근거하여 각 프로세스에 할당할 메모리 양을 조절한다. 어떤 프로세스의 페이지 부재율이 시스템에 미리 정해놓은 상한값을 넘게 되면, 이 프로세스에 할당된 프레임의 수가 부족하다는 의미이므로, 프레임을 추가로 더 할당한다. 이때, 추가로 할당할 빈 프레임이 없다면 일부 프로세스를 스왑아웃시켜 메모리에 올라가 있는 프로세스의 수를 조절한다.
반면에 프로세스의 부재율이 하한값 이하로 떨어지면, 이 프로세스에게 필요 이상의 프레임이 할당된 것으로 간주하여 프레임 수를 줄인다.
이러한 방식으로 메모리 내에 존재하는 모든 프로세스에게 필요한 프레임을 다 할당한 후에도 프레임이 남은 경우, 스왑아웃 되었던 프로세스에게 프레임을 할당함으로써 MPD를 높일 수 있다.
```

