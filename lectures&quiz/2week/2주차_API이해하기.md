# 2주차__API_이해하기

[TOC]

## 1. API

> API: Application Programming Interface 
>
> 한 줄로 요약하면, "프로그램(Application) 사이의 커뮤니케이션을 담당하는 것"이라 볼 수 있다.

### #1. API 정의와 개념

![API](http://blog.wishket.com/wp-content/uploads/2019/10/API-%EC%89%BD%EA%B2%8C-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0.png)

간단하게 도식을 살펴보면, API는 손님의 요청을 요리사에게 전달하는 웨이터로 볼 수 있다. 

손님은 아무 요청이나 할 수는 없고, 메뉴판을 보고 해당 요리사가 제공해줄 수 있는 것을 올바른 방법으로 요청하면 요리사는 그에 응답한다.  

---

API라는 단어는 사실 더 넓은 개념이다. 

API는 운영체제에서 제공해주기도 하고 실제로 컴퓨팅 초기부터 API라는 개념은 OS의 라이브러리 개념으로 사용되었다. 실제로 컴퓨터를 초기에 배울 때 windows의 계산기 API를 사용하여 자신만의 윈도우 계산기를 만들어보는 실습을 많이 했다고 한다... 

하지만 우리에게 익숙한 API라는 단어는 웹을 통해 데이터가 전달되는 것이다. 이는 정확하게 표현하면 API에 의해 조작되는 리소스가 요청을 보내는 컴퓨터의 외부에 있는 `원격 API`인 것이다.  가장 광범위하게 사용되는 커뮤니케이션 네트워크가 인터넷이기 때문에 대부분의 API는 웹 표준을 기반으로 설계되며, 모든 원격 API가 웹 API인 것은 아니지만 웹 API가 원격이라고 가정할 수 있다.

웹 API는 일반적으로 요청 메시지에 HTTP를 사용하여 응답 메시지 구조의 정의를 제공합니다. 이러한 응답 메시지는 일반적으로 XML 또는 JSON 파일의 형태입니다. 다른 애플리케이션이 쉽게 조작할 수 있는 방식으로 데이터를 표시하므로 XML과 JSON 둘 다 자주 사용됩니다.



### #2. API 유형

1. Private API
   - 사내에서 개발자들끼리 사용하는 경우 
2. Partner API
   - 계약을 맺은 파트너 회사들과 API를 통해 데이터를 전송받을 때 사용 
3. Public API
   - 오픈 API
     - API 중에서 플랫폼의 기능 또는 콘텐츠를 외부에서 웹 프로토콜(HTTP)로 호출해 사용할 수 있게 개방(open)한 API를 의미합니다. 네이버 개발자센터에서 제공하고 있는 지도, 검색을 비롯 기계 번역, 캡차, 단축 URL 등 대부분 API는 HTTP로 호출할 수 있는 오픈 API에 해당합니다.
     - (NaverD2) API 중에서 플랫폼의 기능 또는 콘텐츠를 외부에서 웹 프로토콜(HTTP)로 호출해 사용할 수 있게 개방(open)한 API를 의미합니다. 네이버 개발자센터에서 제공하고 있는 지도, 검색을 비롯 기계 번역, 캡차, 단축 URL 등 대부분 API는 HTTP로 호출할 수 있는 오픈 API에 해당합니다.
     - 최근 이 `오픈 API` 라는 용어가 많이 사용되는데, 이는 `대기업`,`IT기업`,`정부 공공기관` 등에서 공익의 목적으로 다양한 사람들이 데이터에 접근하고 활용할 수 있도록 Public으로 개방하고 있기 때문이다. 



### #3. 그러면 웹 프로토콜하고 API하고는 무슨 차이인거지?

- 웹 프로토콜은 좀 더 광범위하게 우리가 웹 브라우저를 통해 소통할 때는 "이러 ~ 저러~한 규칙을 통해서 서로 소통하자."고 약속한 것으로 웹이라는 사회의 '법'과 같은 개념이다.
- API는 프로그램 간의 소통 규칙이다. 다시 말해서, 우리가 어떤 서비스를 만들 때, 지도 기능이 필요하다면 우리가 직접 만들 수도 있지만 네이버에서 제공하는 지도 API를 사용해서 네이버 지도를 내 서비스 내에 포함시킬 수 있는 것이다. 또 가장 많이 사용하는 기능이 바로 로그인 기능이다. 우리는 어떤 앱을 새롭게 가입할 때 여러 과정을 거치는 것이 귀찮다. 때문에 앱 개발자들은 이 귀찮음을 최소화하여 사용자 경험을 높이려고 하므로, 대부분의 사람들이 가지고 있는 네이버, 구글, 카카오 등의 계정을 활용해서 접속할 수 있도록 해주는 것이다.   



## 2. API 인증

### #1. 게이트웨이

네이버 오픈API는 대부분 `https://openapi.naver.com/` 서버를 통해 API를 호출합니다. 이 서버가 바로 API 게이트웨이 서버입니다. API 게이트웨이는 오픈 API 호출이 들어오면 API 호출이 정확한지, 인증된 사용자의 호출인지, 호출 허용량이 맞는지 등을 확인한 다음 실제 각 API 서버를 호출한 결괏값을 반환합니다. 잘못된 호출이 들어오면 오류 코드와 오류 메시지를 반환합니다.



### #2. API키

2016년 1월 26일 이전에는 네이버 오픈API를 이용할 때 각 API별로 API 키를 발급받았습니다. API 키는 인증된 사용자임을 입증하는 고유한 텍스트 문자열입니다. API를 호출할 때 API 키를 API 게이트웨이 서버에 함께 전송해 인증된 사용자임을 입증했습니다. 2016년 1월 26일 이후에는 인증에 API 키를 더 이상 사용하지 않고 [클라이언트 아이디와 클라이언트 시크릿](https://developers.naver.com/docs/common/openapiguide/apiterms.md#클라이언트-아이디와-클라이언트-시크릿)을 사용합니다.



### #3. 클라이언트 id, secret_key

네이버 오픈API 사용자가 인증된 사용자인지를 확인하는 고유한 아이디와 비밀번호입니다. 네이버 개발자센터의 **애플리케이션 등록** 메뉴에서 [애플리케이션을 등록](https://developers.naver.com/docs/common/openapiguide/appregister.md#애플리케이션-등록)하면 발급되는 값입니다.



### #4. 요청

오픈 API를 호출하기 위한 API의 웹 주소(URL)를 의미합니다. 2016년 1월 26일 이전에는 `http://openapi.naver.com`를 요청 URL로 사용했습니다. 2016년 1월 26일 이후에는 `https://openapi.naver.com/버전/서비스구분/API 구분` 형태의 요청 URL을 사용합니다. 

이때 요청변수를 잘 포함시켜 요청해야 한다. 요청변수란, 오픈 API를 호출할 때 함께 서버로 전송해야 하는 값입니다. API 레퍼런스를 참고해 요청 변수의 이름이 틀리거나 필수 요청 변수가 누락되지 않도록 주의해야 합니다.



### #5. 인증과 OAuth 2.0 

인증은 어떤 사용자가 본인 자신임을 식별하는 것입니다. 일반적으로 아이디와 암호가 일치하면 사용자가 본인이라고 판단합니다. 네이버에 로그인할 때 네이버 사용자가 네이버 아이디와 암호를 입력해서 로그인하는 것이라 생각하면 됩니다. 그러나 제삼자가 네이버 오픈API를 이용해서 만든 애플리케이션에 사용자가 네이버 아이디와 암호를 직접 입력하면 보안 문제가 발생할 수 있습니다. 이런 때에는 제삼자가 만든 애플리케이션이 아니라 네이버의 아이디와 암호를 입력받는 서비스가 인증을 하고 인증 성공 여부를 애플리케이션에 전달하게 하면 사용자는 안심하고 애플리케이션을 사용할 수 있습니다. 이러한 절차를 정의한 표준이 OAuth입니다. 네이버 오픈API는 OAuth 2.0을 인증 서비스에 적용하고 있습니다.



## 3. RESTful API











-------

**References**

[API(애플리케이션 프로그래밍 인터페이스): 개념, 기능, 장점](https://www.redhat.com/ko/topics/api/what-are-application-programming-interfaces)

[WIN api를 이용한 계산기 만들기]([https://medium.com/@jckk9082/win-api%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-%EA%B3%84%EC%82%B0%EA%B8%B0-1-e825f3ccc10a](https://medium.com/@jckk9082/win-api를-활용한-계산기-1-e825f3ccc10a))

[API란?]([https://medium.com/@dydrlaks/api-%EB%9E%80-c0fd6222d34c](https://medium.com/@dydrlaks/api-란-c0fd6222d34c))